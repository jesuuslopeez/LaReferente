<section class="competitions">
  <!-- Cabecera -->
  <header class="competitions__header">
    <section class="competitions__header-content">
      <h1 class="competitions__title">Competiciones</h1>
      <p class="competitions__description">
        Explora las principales competiciones de fútbol de España
      </p>
    </section>
    @if (authService.esEditor()) {
      <a routerLink="/admin/competiciones/nueva" class="competitions__add-btn">
        <svg class="competitions__add-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
        </svg>
        Añadir competición
      </a>
    }
  </header>

  <!-- Buscador y filtros -->
  <section class="competitions__toolbar">
    <section class="competitions__search">
      <svg class="competitions__search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
      </svg>
      <input
        type="text"
        class="competitions__search-input"
        placeholder="Buscar competiciones..."
        [formControl]="busquedaControl"
      />
    </section>

    <section class="competitions__filters">
      @for (cat of categorias; track cat.valor) {
        <button
          class="competitions__filter-btn"
          [class.competitions__filter-btn--active]="filtroActivo() === cat.valor"
          (click)="setFiltro(cat.valor)">
          {{ cat.texto }}
        </button>
      }
    </section>
  </section>

  <!-- Grid de competiciones -->
  <section class="competitions__grid">
    @for (comp of competicionesPaginadas; track comp.id) {
      <app-competition-card
        [id]="comp.id"
        [nombre]="comp.nombre"
        [nombreCompleto]="comp.nombreCompleto"
        [tipo]="comp.tipo"
        [temporada]="comp.temporada"
        [logoUrl]="comp.logoUrl"
        [fechaInicio]="comp.fechaInicio"
        [fechaFin]="comp.fechaFin"
      />
    } @empty {
      <p class="competitions__empty">No se encontraron competiciones para esta busqueda.</p>
    }
  </section>

  <!-- Paginacion -->
  @if (totalPaginas > 1) {
    <nav class="competitions__pagination">
      <button
        class="competitions__pagination-btn"
        [class.competitions__pagination-btn--disabled]="paginaActual() === 1"
        [disabled]="paginaActual() === 1"
        (click)="paginaAnterior()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>

      @if (paginas[0] > 1) {
        <button class="competitions__pagination-number" (click)="irAPagina(1)">1</button>
        @if (paginas[0] > 2) {
          <span class="competitions__pagination-dots">...</span>
        }
      }

      @for (pagina of paginas; track pagina) {
        <button
          class="competitions__pagination-number"
          [class.competitions__pagination-number--active]="paginaActual() === pagina"
          (click)="irAPagina(pagina)">
          {{ pagina }}
        </button>
      }

      @if (paginas[paginas.length - 1] < totalPaginas) {
        @if (paginas[paginas.length - 1] < totalPaginas - 1) {
          <span class="competitions__pagination-dots">...</span>
        }
        <button class="competitions__pagination-number" (click)="irAPagina(totalPaginas)">
          {{ totalPaginas }}
        </button>
      }

      <button
        class="competitions__pagination-btn"
        [class.competitions__pagination-btn--disabled]="paginaActual() === totalPaginas"
        [disabled]="paginaActual() === totalPaginas"
        (click)="paginaSiguiente()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </button>
    </nav>
  }

  <!-- Info de resultados -->
  <p class="competitions__info">
    Mostrando {{ competicionesPaginadas.length }} de {{ competicionesFiltradas.length }} competiciones
  </p>
</section>
