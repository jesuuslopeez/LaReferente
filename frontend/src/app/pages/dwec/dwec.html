<section class="dwec">
  <header class="dwec__header">
    <h1 class="dwec__title">DWEC - Ejemplos y Demos</h1>
    <p class="dwec__description">Página de demostración para Desarrollo Web en Entorno Cliente</p>
  </header>

  <section class="dwec__alerts">
    <app-alert
      type="info"
      message="Esta página contiene ejemplos de servicios, formularios reactivos y componentes."
    />
  </section>

  <section class="dwec__demo">
    <h2 class="dwec__section-title">Prueba los Servicios</h2>
    <p class="dwec__section-desc">Interactúa con los servicios de notificaciones y loading implementados</p>

    <section class="dwec__demo-buttons">
      <app-button
        text="Toast Success"
        variant="primary"
        size="sm"
        (click)="showSuccessToast()"
      />
      <app-button
        text="Toast Error"
        variant="danger"
        size="sm"
        (click)="showErrorToast()"
      />
      <app-button
        text="Toast Info"
        variant="secondary"
        size="sm"
        (click)="showInfoToast()"
      />
      <app-button
        text="Toast Warning"
        variant="ghost"
        size="sm"
        (click)="showWarningToast()"
      />
      <app-button
        [text]="isLoading() ? 'Cargando...' : 'Simular Loading'"
        variant="primary"
        size="sm"
        [disabled]="isLoading()"
        (click)="simulateLoading()"
      />
      <app-button
        text="Enviar Notificación"
        variant="secondary"
        size="sm"
        (click)="sendNotification()"
      />
    </section>

    @if (lastMessage()) {
      <p class="dwec__last-message">Último mensaje: <strong>{{ lastMessage() }}</strong></p>
    }
  </section>

  <!-- Ejemplo de FormArray -->
  <section class="dwec__form-array">
    <h2 class="dwec__section-title">Ejemplo FormArray - Lista Dinámica de Teléfonos</h2>
    <p class="dwec__section-desc">Añade o elimina teléfonos dinámicamente</p>

    <form [formGroup]="phonesForm" (ngSubmit)="onSubmitPhones()" class="dwec__phones-form">
      <section class="dwec__form-field">
        <label class="dwec__form-label">Nombre</label>
        <input
          formControlName="name"
          placeholder="Tu nombre"
          class="dwec__form-input"
          [class.dwec__form-input--error]="phonesForm.get('name')?.invalid && phonesForm.get('name')?.touched"
        />
        @if (phonesForm.get('name')?.invalid && phonesForm.get('name')?.touched) {
          <small class="dwec__form-error">Nombre requerido (mínimo 2 caracteres)</small>
        }
      </section>

      <section formArrayName="phones" class="dwec__phones-list">
        <label class="dwec__form-label">Teléfonos</label>
        @for (phone of phones.controls; track $index) {
          <section [formGroupName]="$index" class="dwec__phone-row">
            <input
              formControlName="number"
              placeholder="6XXXXXXXX o 7XXXXXXXX"
              class="dwec__form-input dwec__form-input--phone"
              [class.dwec__form-input--error]="phone.get('number')?.invalid && phone.get('number')?.touched"
            />
            <button
              type="button"
              (click)="removePhone($index)"
              class="dwec__phone-remove"
              [disabled]="phones.length === 1"
            >
              ×
            </button>
            @if (phone.get('number')?.invalid && phone.get('number')?.touched) {
              <small class="dwec__form-error dwec__form-error--full">Teléfono inválido (debe empezar por 6 o 7 y tener 9 dígitos)</small>
            }
          </section>
        }
        <button type="button" (click)="addPhone()" class="dwec__phone-add">
          + Añadir teléfono
        </button>
      </section>

      <button type="submit" class="dwec__form-submit" [disabled]="phonesForm.invalid">
        Guardar teléfonos
      </button>
    </form>
  </section>

  <section class="dwec__featured">
    <h2 class="dwec__section-title">Jugadores Destacados</h2>
    <section class="dwec__cards">
      <app-card
        playerName="Lamine Yamal"
        playerSlug="lamine_yamal"
        imageSize="medium"
        [dorsalNumber]="10"
        clubName="FC Barcelona"
        clubLogo="assets/images/teams/fc-barcelona.png"
        country="España"
        [age]="18"
        position="Extremo"
      />
      <app-card
        playerName="Pedri González"
        playerSlug="pedri"
        imageSize="medium"
        [dorsalNumber]="8"
        clubName="FC Barcelona"
        clubLogo="assets/images/teams/fc-barcelona.png"
        country="España"
        [age]="22"
        position="Centrocampista"
      />
      <app-card
        playerName="Nico Williams"
        playerSlug="nico_williams"
        imageSize="medium"
        [dorsalNumber]="10"
        clubName="Athletic Club"
        clubLogo="assets/images/teams/athletic-club.png"
        country="España"
        [age]="22"
        position="Extremo"
      />
    </section>
  </section>

  <section class="dwec__competitions">
    <h2 class="dwec__section-title">Competiciones</h2>
    <section class="dwec__competition-cards">
      <app-competition-card
        [id]="1"
        nombre="LaLiga EA Sports"
        nombreCompleto="LaLiga EA Sports"
        tipo="LIGA"
        temporada="2025-2026"
        logoUrl="https://r2.thesportsdb.com/images/media/league/badge/ja4it51687628717.png/medium"
        fechaInicio="2025-08-15"
        fechaFin="2026-05-24"
      />
      <app-competition-card
        [id]="2"
        nombre="Copa del Rey"
        nombreCompleto="Copa de S.M. El Rey"
        tipo="COPA"
        temporada="2025-2026"
        logoUrl="https://r2.thesportsdb.com/images/media/league/badge/2ikh3a1671782958.png/medium"
        fechaInicio="2025-10-01"
        fechaFin="2026-04-26"
      />
    </section>
  </section>

  <section class="dwec__actions">
    <app-button
      text="Ver Guía de Componentes"
      variant="primary"
      size="lg"
      (click)="navigateToStyleGuide()"
    />
  </section>
</section>
